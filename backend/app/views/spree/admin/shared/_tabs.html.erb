<% Spree::Backend::Config.menu_items.sort_by { |item| item.position || Float::INFINITY }.select { instance_exec(&_1.condition) }.each do |menu_item| %>
  <%= tab(
    icon: menu_item.icon,
    label: menu_item.label,
    url: menu_item.url,
    selected: menu_item.selected?(request),
  ) do %>
    <% if menu_item.partial %>
      <%- render partial: menu_item.partial %>
    <% elsif menu_item.children.present? %>
      <ul class="admin-subnav" data-hook="admin_<%= menu_item.label %>_sub_tabs">
        <%- menu_item.children.each do |child| %>
          <%= tab(
            icon: child.icon,
            label: child.label,
            url: child.url,
            selected: child.selected?(request),
          ) %>
        <% end %>
      </ul>
    <%- end %>
  <% end %>
<% end %>
